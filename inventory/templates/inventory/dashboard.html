{% extends 'base.html' %}
{% block content %}
<div class="flex flex-col lg:flex-row gap-6">
  <aside id="filterPane" class="lg:w-64 w-full lg:block hidden">
    <div class="bg-white shadow rounded-xl p-4">
      <h2 class="text-sm font-semibold text-slate-700">Expiry Overview <span class="text-slate-400">(Press Tab)</span></h2>
      <ul class="mt-3 space-y-2 text-sm">
        <li class="flex items-center justify-between"><span>Expired</span><span class="inline-flex items-center rounded-full bg-red-100 text-red-700 text-xs px-2 py-0.5">{{ expired_count }}</span></li>
        <li class="flex items-center justify-between"><span>Expiring ≤30d</span><span class="inline-flex items-center rounded-full bg-amber-100 text-amber-800 text-xs px-2 py-0.5">{{ expiring_count }}</span></li>
        <li class="flex items-center justify-between"><span>OK</span><span class="inline-flex items-center rounded-full bg-emerald-100 text-emerald-700 text-xs px-2 py-0.5">{{ ok_count }}</span></li>
      </ul>
      <a href="{% url 'inventory:medicines' %}" class="mt-4 inline-flex text-sm text-brand-700 hover:underline">Open full list →</a>
    </div>
  </aside>

  <section class="flex-1">
    <form class="flex gap-2 mb-4" method="get">
      <input class="w-full rounded-lg border-slate-300 focus:border-brand-500 focus:ring-brand-500" type="search" name="q" value="{{ q }}" placeholder="Search by name or ID" />
      <button class="inline-flex rounded-lg bg-brand-600 px-4 py-2 text-white hover:bg-brand-700">Search</button>
    </form>

   <div id="medList" class="bg-white shadow rounded-xl divide-y">
  {% include 'inventory/_med_list.html' with meds=meds %}
</div>

  </section>

  <aside class="lg:w-80 w-full">
    <div id="detailPane" class="bg-white shadow rounded-xl min-h-[240px]">
      <div class="p-4 text-slate-500">Click a medicine to see details here.</div>
    </div>
  </aside>
</div>
{% endblock %}
